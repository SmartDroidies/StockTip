(function(r,g,p){function k(a){this.url=a}function D(a,c){var l=g.createElement("script");l.src=a;l.async=c;g.head.appendChild(l)}function I(a){var c={width:0,height:0};"mma"==a?(c.width="300px",c.height="50px"):"medrect"==a?(c.width="300px",c.height="250px"):"xxlarge"==a?(c.width="320px",c.height="50px"):"xlarge"==a?(c.width="300px",c.height="50px"):"sky"==a?(c.width="120px",c.height="600px"):"widesky"==a?(c.width="160px",c.height="600px"):"leader"==a?(c.width="728px",c.height="90px"):"full_320x480"==
a?(c.width="320px",c.height="480px"):"full_480x320"==a?(c.width="480px",c.height="320px"):"full_640x960"==a?(c.width="640px",c.height="960px"):"full_960x640"==a?(c.width="960px",c.height="640px"):"full_1136x640"==a?(c.width="1136px",c.height="640px"):"full_768x1024"==a?(c.width="768px",c.height="1024px"):"full_1024x768"==a?(c.width="1024px",c.height="768px"):"full_800x1280"==a?(c.width="800px",c.height="1280px"):"small"==a?(c.width="120px",c.height="20px"):"large"==a?(c.width="216px",c.height="36px"):
"large"==a?(c.width="216px",c.height="36px"):"medium"==a&&(c.width="168px",c.height="68px");return c}(function(){function a(a,d){a=a||"";d=d||{};for(var g in c)c.hasOwnProperty(g)&&(d.autoFix&&(d["fix_"+g]=!0),d.fix=d.fix||d["fix_"+g]);var s=function(a){return"string"===typeof a?a.replace(/(&#\d{1,4};)/gm,function(a){a=a.substring(2,a.length-1);return String.fromCharCode(a)}):a},m={comment:/^\x3c!--/,endTag:/^<\//,atomicTag:/^<\s*(script|style|noscript|iframe|textarea)[\s\/>]/i,startTag:/^</,chars:/^[^<]/},
k={comment:function(){var b=a.indexOf("--\x3e");if(0<=b)return{content:a.substr(4,b),length:b+3}},endTag:function(){var b=a.match(f);if(b)return{tagName:b[1],length:b[0].length}},atomicTag:function(){var b=k.startTag();if(b){var c=a.slice(b.length);if(c.match(RegExp("</\\s*"+b.tagName+"\\s*>","i"))&&(c=c.match(RegExp("([\\s\\S]*?)</\\s*"+b.tagName+"\\s*>","i"))))return{tagName:b.tagName,attrs:b.attrs,content:c[1],length:c[0].length+b.length}}},startTag:function(){var c=a.match(l);if(c){var z={};c[2].replace(b,
function(a,b,c,v,h){a=c||v||h||e.test(b)&&b||null;z[b]=s(a)});return{tagName:c[1],attrs:z,unary:!!c[3],length:c[0].length}}},chars:function(){var b=a.indexOf("<");return{length:0<=b?b:a.length}}},p=function(){for(var b in m)if(m[b].test(a)){n&&console.log("suspected "+b);var c=k[b]();return c?(n&&console.log("parsed "+b,c),c.type=c.type||b,c.text=a.substr(0,c.length),a=a.slice(c.length),c):null}};d.fix&&function(){var b=/^(AREA|BASE|BASEFONT|BR|COL|FRAME|HR|IMG|INPUT|ISINDEX|LINK|META|PARAM|EMBED)$/i,
c=/^(COLGROUP|DD|DT|LI|OPTIONS|P|TD|TFOOT|TH|THEAD|TR)$/i,e=[];e.last=function(){return this[this.length-1]};e.lastTagNameEq=function(a){var b=this.last();return b&&b.tagName&&b.tagName.toUpperCase()===a.toUpperCase()};e.containsTagName=function(a){for(var b=0,c;c=this[b];b++)if(c.tagName===a)return!0;return!1};var n=function(a){a&&"startTag"===a.type&&(a.unary=b.test(a.tagName)||a.unary);return a},f=p,l=function(){a="</"+e.pop().tagName+">"+a},g={startTag:function(b){var v=b.tagName;"TR"===v.toUpperCase()&&
e.lastTagNameEq("TABLE")?(a="<TBODY>"+a,s()):d.fix_selfClose&&c.test(v)&&e.containsTagName(v)?e.lastTagNameEq(v)?l():(a="</"+b.tagName+">"+a,s()):b.unary||e.push(b)},endTag:function(a){e.last()?d.fix_tagSoup&&!e.lastTagNameEq(a.tagName)?l():e.pop():d.fix_tagSoup&&(f(),s())}},s=function(){var b=a,c=n(f());a=b;if(c&&g[c.type])g[c.type](c)};p=function(){s();return n(f())}}();return{append:function(b){a+=b},readToken:p,readTokens:function(a){for(var b;(b=p())&&(!a[b.type]||!1!==a[b.type](b)););},clear:function(){var b=
a;a="";return b},rest:function(){return a},stack:[]}}var c=function(){var a={},b=this.document.createElement("div");b.innerHTML="<P><I></P></I>";a.tagSoup="<P><I></P></I>"!==b.innerHTML;b.innerHTML="<P><i><P></P></i></P>";a.selfClose=2===b.childNodes.length;return a}(),l=/^<([\-A-Za-z0-9_!]+)((?:\s+[\w\-]+(?:\s*=?\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,f=/^<\/([\-A-Za-z0-9_]+)[^>]*>/,b=/([\-A-Za-z0-9_]+)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/g,e=/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noresize|noshade|nowrap|readonly|selected)$/i,
n=!1;a.supports=c;a.tokenToString=function(a){var b={comment:function(a){return"<--"+a.content+"--\x3e"},endTag:function(a){return"</"+a.tagName+">"},atomicTag:function(a){console.log(a);return b.startTag(a)+a.content+b.endTag(a)},startTag:function(a){var b="<"+a.tagName,c;for(c in a.attrs)var e=a.attrs[c],b=b+(" "+c+'="'+(e?e.replace(/(^|[^\\])"/g,'$1\\"'):"")+'"');return b+(a.unary?"/>":">")},chars:function(a){return a.text}};return b[a.type](a)};a.escapeAttributes=function(a){var b={},c;for(c in a){var e=
a[c];b[c]=e&&e.replace(/(^|[^\\])"/g,'$1\\"')}return b};for(var d in c)a.browserHasFlaw=a.browserHasFlaw||!c[d]&&d;this.htmlParser=a})();(function(){function a(){}function c(a){return a!==m&&null!==a}function d(a,b,c){var e,h=a&&a.length||0;for(e=0;e<h;e++)b.call(c,a[e],e)}function f(a,b,c){for(var e in a)a.hasOwnProperty(e)&&b.call(c,e,a[e])}function b(a,b){f(b,function(b,c){a[b]=c});return a}function e(a,b){a=a||{};f(b,function(b,e){c(a[b])||(a[b]=e)});return a}function n(a){try{return k.call(a)}catch(b){var c=
[];d(a,function(a){c.push(a)});return c}}var g={afterAsync:a,afterDequeue:a,afterStreamStart:a,afterWrite:a,beforeEnqueue:a,beforeWrite:function(a){return a},done:a,error:function(a){throw a;},releaseAsync:!1},h=this,m=void 0;if(!h.postscribe){var k=Array.prototype.slice,p=function(){function a(b,e,n){var d=h+e;if(2===arguments.length)return d=b.getAttribute(d),c(d)?String(d):d;c(n)&&""!==n?b.setAttribute(d,n):b.removeAttribute(d)}function e(c,h){var d=c.ownerDocument;b(this,{root:c,options:h,win:d.defaultView||
d.parentWindow,doc:d,parser:htmlParser("",{autoFix:!0}),actuals:[c],proxyHistory:"",proxyRoot:d.createElement(c.nodeName),scriptStack:[],writeQueue:[]});a(this.proxyRoot,"proxyof",0)}var h="data-ps-";e.prototype.write=function(){[].push.apply(this.writeQueue,arguments);for(var a;!this.deferredRemote&&this.writeQueue.length;)a=this.writeQueue.shift(),"function"===typeof a?this.callFunction(a):this.writeImpl(a)};e.prototype.callFunction=function(a){var b={type:"function",value:a.name||a.toString()};
this.onScriptStart(b);a.call(this.win,this.doc);this.onScriptDone(b)};e.prototype.writeImpl=function(a){this.parser.append(a);var b;a=[];for(var c,e;(b=this.parser.readToken())&&!(c=b&&"tagName"in b?!!~b.tagName.toLowerCase().indexOf("script"):!1)&&!(e=b&&"tagName"in b?!!~b.tagName.toLowerCase().indexOf("style"):!1);)a.push(b);this.writeStaticTokens(a);c&&this.handleScriptToken(b);e&&this.handleStyleToken(b)};e.prototype.writeStaticTokens=function(a){a=this.buildChunk(a);if(a.actual)return a.html=
this.proxyHistory+a.actual,this.proxyHistory+=a.proxy,this.proxyRoot.innerHTML=a.html,this.walkChunk(),a};e.prototype.buildChunk=function(a){var b=this.actuals.length,c=[],e=[],n=[];d(a,function(a){c.push(a.text);if(a.attrs){if(!/^noscript$/i.test(a.tagName)){var d=b++;e.push(a.text.replace(/(\/?>)/," "+h+"id="+d+" $1"));"ps-script"!==a.attrs.id&&"ps-style"!==a.attrs.id&&n.push("atomicTag"===a.type?"":"<"+a.tagName+" "+h+"proxyof="+d+(a.unary?" />":">"))}}else e.push(a.text),n.push("endTag"===a.type?
a.text:"")});return{tokens:a,raw:c.join(""),actual:e.join(""),proxy:n.join("")}};e.prototype.walkChunk=function(){for(var b,e=[this.proxyRoot];c(b=e.shift());){var h=1===b.nodeType;h&&a(b,"proxyof")||(h&&(this.actuals[a(b,"id")]=b,a(b,"id",null)),(h=b.parentNode&&a(b.parentNode,"proxyof"))&&this.actuals[h].appendChild(b));e.unshift.apply(e,n(b.childNodes))}};e.prototype.handleScriptToken=function(a){var b=this.parser.clear();b&&this.writeQueue.unshift(b);a.src=a.attrs.src||a.attrs.SRC;if(a.src&&this.scriptStack.length)this.deferredRemote=
a;else this.onScriptStart(a);var c=this;this.writeScriptToken(a,function(){c.onScriptDone(a)})};e.prototype.handleStyleToken=function(a){var b=this.parser.clear();b&&this.writeQueue.unshift(b);a.type=a.attrs.type||a.attrs.TYPE||"text/css";this.writeStyleToken(a);b&&this.write()};e.prototype.writeStyleToken=function(a){var b=this.buildStyle(a);this.insertStyle(b);a.content&&(b.styleSheet&&!b.sheet?b.styleSheet.cssText=a.content:b.appendChild(this.doc.createTextNode(a.content)))};e.prototype.buildStyle=
function(a){var b=this.doc.createElement(a.tagName);b.setAttribute("type",a.type);f(a.attrs,function(a,c){b.setAttribute(a,c)});return b};e.prototype.insertStyle=function(a){this.writeImpl('<span id="ps-style"/>');var b=this.doc.getElementById("ps-style");b.parentNode.replaceChild(a,b)};e.prototype.onScriptStart=function(a){a.outerWrites=this.writeQueue;this.writeQueue=[];this.scriptStack.unshift(a)};e.prototype.onScriptDone=function(a){a!==this.scriptStack[0]?this.options.error({message:"Bad script nesting or script finished twice"}):
(this.scriptStack.shift(),this.write.apply(this,a.outerWrites),!this.scriptStack.length&&this.deferredRemote&&(this.onScriptStart(this.deferredRemote),this.deferredRemote=null))};e.prototype.writeScriptToken=function(a,b){var c=this.buildScript(a),e=this.shouldRelease(c),h=this.options.afterAsync;a.src&&(c.src=a.src,this.scriptLoadHandler(c,e?h:function(){b();h()}));try{this.insertScript(c),a.src&&!e||b()}catch(d){this.options.error(d),b()}};e.prototype.buildScript=function(a){var b=this.doc.createElement(a.tagName);
f(a.attrs,function(a,c){b.setAttribute(a,c)});a.content&&(b.text=a.content);return b};e.prototype.insertScript=function(a){this.writeImpl('<span id="ps-script"/>');var b=this.doc.getElementById("ps-script");b.parentNode.replaceChild(a,b)};e.prototype.scriptLoadHandler=function(a,c){function e(){a=a.onload=a.onreadystatechange=a.onerror=null}var h=this.options.error;b(a,{onload:function(){e();c()},onreadystatechange:function(){/^(loaded|complete)$/.test(a.readyState)&&(e(),c())},onerror:function(){var b=
{message:"remote script failed "+a.src};e();h(b);c()}})};e.prototype.shouldRelease=function(a){return!/^script$/i.test(a.nodeName)||!!(this.options.releaseAsync&&a.src&&a.hasAttribute("async"))};return e}();h.postscribe=function(){function c(){var a=m.shift(),b;a&&(b=a[a.length-1],b.afterDequeue(),a.stream=d.apply(null,a),b.afterStreamStart())}function d(e,h,g){function m(a){a=g.beforeWrite(a);k.write(a);g.afterWrite(a)}k=new p(e,g);k.id=l++;k.name=g.name||k.id;f.streams[k.name]=k;var s=e.ownerDocument,
z={close:s.close,open:s.open,write:s.write,writeln:s.writeln};b(s,{close:a,open:a,write:function(){return m(n(arguments).join(""))},writeln:function(){return m(n(arguments).join("")+"\n")}});var u=k.win.onerror||a;k.win.onerror=function(a,b,c){g.error({msg:a+" - "+b+":"+c});u.apply(k.win,arguments)};k.write(h,function(){b(s,z);k.win.onerror=u;g.done();k=null;c()});return k}function f(b,d,n){"function"===typeof n&&(n={done:n});n=e(n,g);b=/^#/.test(b)?h.document.getElementById(b.substr(1)):b.jquery?
b[0]:b;var l=[b,d,n];b.postscribe={cancel:function(){l.stream?l.stream.abort():l[1]=a}};n.beforeEnqueue(l);m.push(l);k||c();return b.postscribe}var l=0,m=[],k=null;return b(f,{streams:{},queue:m,WriteStream:p})}()}})();(function(){function a(a,g){a=a||"";g=g||{};for(var k in c)c.hasOwnProperty(k)&&(g.autoFix&&(g["fix_"+k]=!0),g.fix=g.fix||g["fix_"+k]);var s=function(a){return"string"===typeof a?a.replace(/(&#\d{1,4};)/gm,function(a){a=a.substring(2,a.length-1);return String.fromCharCode(a)}):a},m=
{comment:/^\x3c!--/,endTag:/^<\//,atomicTag:/^<\s*(script|style|noscript|iframe|textarea)[\s\/>]/i,startTag:/^</,chars:/^[^<]/},p={comment:function(){var b=a.indexOf("--\x3e");if(0<=b)return{content:a.substr(4,b),length:b+3}},endTag:function(){var b=a.match(f);if(b)return{tagName:b[1],length:b[0].length}},atomicTag:function(){var b=p.startTag();if(b){var c=a.slice(b.length);if(c.match(RegExp("</\\s*"+b.tagName+"\\s*>","i"))&&(c=c.match(RegExp("([\\s\\S]*?)</\\s*"+b.tagName+"\\s*>","i"))))return{tagName:b.tagName,
attrs:b.attrs,content:c[1],length:c[0].length+b.length}}},startTag:function(){var c=a.match(d);if(c){var n={};c[2].replace(b,function(a,b,c,d,h){a=c||d||h||e.test(b)&&b||null;n[b]=s(a)});return{tagName:c[1],attrs:n,unary:!!c[3],length:c[0].length}}},chars:function(){var b=a.indexOf("<");return{length:0<=b?b:a.length}}},q=function(){for(var b in m)if(m[b].test(a)){n&&console.log("suspected "+b);var c=p[b]();return c?(n&&console.log("parsed "+b,c),c.type=c.type||b,c.text=a.substr(0,c.length),a=a.slice(c.length),
c):null}};g.fix&&function(){var b=/^(AREA|BASE|BASEFONT|BR|COL|FRAME|HR|IMG|INPUT|ISINDEX|LINK|META|PARAM|EMBED)$/i,c=/^(COLGROUP|DD|DT|LI|OPTIONS|P|TD|TFOOT|TH|THEAD|TR)$/i,e=[];e.last=function(){return this[this.length-1]};e.lastTagNameEq=function(a){var b=this.last();return b&&b.tagName&&b.tagName.toUpperCase()===a.toUpperCase()};e.containsTagName=function(a){for(var b=0,c;c=this[b];b++)if(c.tagName===a)return!0;return!1};var d=function(a){a&&"startTag"===a.type&&(a.unary=b.test(a.tagName)||a.unary);
return a},n=q,f=function(){a="</"+e.pop().tagName+">"+a},l={startTag:function(b){var d=b.tagName;"TR"===d.toUpperCase()&&e.lastTagNameEq("TABLE")?(a="<TBODY>"+a,k()):g.fix_selfClose&&c.test(d)&&e.containsTagName(d)?e.lastTagNameEq(d)?f():(a="</"+b.tagName+">"+a,k()):b.unary||e.push(b)},endTag:function(a){e.last()?g.fix_tagSoup&&!e.lastTagNameEq(a.tagName)?f():e.pop():g.fix_tagSoup&&(n(),k())}},k=function(){var b=a,c=d(n());a=b;if(c&&l[c.type])l[c.type](c)};q=function(){k();return d(n())}}();return{append:function(b){a+=
b},readToken:q,readTokens:function(a){for(var b;(b=q())&&(!a[b.type]||!1!==a[b.type](b)););},clear:function(){var b=a;a="";return b},rest:function(){return a},stack:[]}}var c=function(){var a={},b=this.document.createElement("div");b.innerHTML="<P><I></P></I>";a.tagSoup="<P><I></P></I>"!==b.innerHTML;b.innerHTML="<P><i><P></P></i></P>";a.selfClose=2===b.childNodes.length;return a}(),d=/^<([\-A-Za-z0-9_!]+)((?:\s+[\w\-]+(?:\s*=?\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,f=/^<\/([\-A-Za-z0-9_]+)[^>]*>/,
b=/([\-A-Za-z0-9_]+)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/g,e=/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noresize|noshade|nowrap|readonly|selected)$/i,n=!1;a.supports=c;a.tokenToString=function(a){var b={comment:function(a){return"<--"+a.content+"--\x3e"},endTag:function(a){return"</"+a.tagName+">"},atomicTag:function(a){console.log(a);return b.startTag(a)+a.content+b.endTag(a)},startTag:function(a){var b="<"+a.tagName,c;for(c in a.attrs)var e=
a.attrs[c],b=b+(" "+c+'="'+(e?e.replace(/(^|[^\\])"/g,'$1\\"'):"")+'"');return b+(a.unary?"/>":">")},chars:function(a){return a.text}};return b[a.type](a)};a.escapeAttributes=function(a){var b={},c;for(c in a){var e=a[c];b[c]=e&&e.replace(/(^|[^\\])"/g,'$1\\"')}return b};for(var g in c)a.browserHasFlaw=a.browserHasFlaw||!c[g]&&g;this.htmlParser=a})();var A="adtag2212"+function(){try{var a=g.getElementsByTagName("script"),c=a.length-1;if(-1<c&&null!=a[c].src&&-1<a[c].src.indexOf("soma.smaato.net"))return""}catch(d){}return"s"}(),
y="",q="",w=null,x=null,C=0,B,E=["img","txt","richmedia","all","vast"],F="mma medrect leader sky widesky small large medium xlarge xxlarge full_320x480 full_480x320 full_640x960 full_960x640 full_1136x640 full_768x1024 full_1024x768 full_800x1280".split(" "),G=["m","f","male","female"];r.smaatoConfigs===p&&(r.smaatoConfigs={});var H=!1;r.smaato_hide_modal=function(a){var c=g.getElementById("smaato_modalAd");if(c){c.style.visibility="hidden";var d=c.parentElement;d&&("undefined"!=typeof smaatoConfigs[a]&&
"function"==typeof smaatoConfigs[a].modalClosedCallback&&smaatoConfigs[a].modalClosedCallback(),d.removeChild(c))}};var t=r.SomaTag=new function(){function a(a,c,d){if(a){var f=64;a.style.fontSize=f+"px";var h=a.offsetWidth+1;for(!0==smaatoConfigs[c].modalDisplay&&(d=t.maximumModalWidth(c)-20);h>d;)f-=1,a.style.fontSize=f+"px",h=a.offsetWidth;a.style.fontSize=f-2+"px"}}function c(a,c){for(var d=c.length,l=0;l<d;++l){var h=g.createElement("img");h.setAttribute("alt","");h.setAttribute("width","1px");
h.setAttribute("height","1px");h.style.display="none";h.src=c[l];a.appendChild(h)}r.postscribe!=p&&(null==a&&(null==g.body&&(g.body=g.createElement("body")),a=g.body),postscribe(a,'<script>var _qevents=_qevents||[];!function(){var e=document.createElement("script");e.src=("https:"==document.location.protocol?"https://secure":"http://edge")+".quantserve.com/quant.js",e.async=!0,e.type="text/javascript";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}(),_qevents.push({qacct:"p-KT05RXvwF6exC"});\x3c/script>',
f))}var l=function(a){-1!==a.indexOf('onerror="')&&(a=a.split('onerror="')[1],a=a.split('"')[0],Function(a)())},f={beforeWriteToken:function(a){-1!==a.text.indexOf('"mraid.js"')&&(l(a.text),a=!1);return a},beforeWrite:function(a){-1!==a.indexOf('"mraid.js"')&&(l(a),a="");return a}};this.showModal=function(a){if(!1==H){H=!0;var c=g.createElement("link");c.setAttribute("rel","stylesheet");c.setAttribute("type","text/css");c.setAttribute("href","http://soma.smaato.net/oapi/js/smaatoAdTag.css");g.getElementsByTagName("head")[0].appendChild(c)}if(c=
g.getElementById("smaato_modalAd")){c.innerHTML="";var d=c.parentElement;d&&d.removeChild(c)}c="";"TXT"==smaatoConfigs[a].adType&&(c="smaato_modalDialog_Gradient");d=" onClick=\"smaato_hide_modal('"+a+"')\" ";"RICHMEDIA"==smaatoConfigs[a].adType&&(d="");c='<div id="smaato_modalAd" class="smaato_modalDialog">             <div id="smaato_modal_container" class="'+c+'" '+d+'\t><span id="_smaato_closeButton" onClick="smaato_hide_modal(\''+a+'\')" title="Close" class="smaato_close">X</span>                             </div>        </div>';
d=g.createElement("div");d.innerHTML=c;g.body.appendChild(d.firstChild);c=g.getElementById("smaato_modal_container");"mma"==smaatoConfigs[a].dimension?(c.style.width="300px",c.style.height="50px"):"medrect"==smaatoConfigs[a].dimension?(c.style.width="300px",c.style.height="250px"):"xxlarge"==smaatoConfigs[a].dimension?(c.style.width="320px",c.style.height="50px"):"xlarge"==smaatoConfigs[a].dimension?(c.style.width="300px",c.style.height="50px"):"sky"==smaatoConfigs[a].dimension?(c.style.width="120px",
c.style.height="600px"):"widesky"==smaatoConfigs[a].dimension?(c.style.width="160px",c.style.height="600px"):"leader"==smaatoConfigs[a].dimension?(c.style.width="728px",c.style.height="90px"):"full_320x480"==smaatoConfigs[a].dimension?(c.style.width="320px",c.style.height="480px"):"full_480x320"==smaatoConfigs[a].dimension?(c.style.width="480px",c.style.height="320px"):"full_640x960"==smaatoConfigs[a].dimension?(c.style.width="640px",c.style.height="960px"):"full_960x640"==smaatoConfigs[a].dimension?
(c.style.width="960px",c.style.height="640px"):"full_1136x640"==smaatoConfigs[a].dimension?(c.style.width="1136px",c.style.height="640px"):"full_768x1024"==smaatoConfigs[a].dimension?(c.style.width="768px",c.style.height="1024px"):"full_1024x768"==smaatoConfigs[a].dimension?(c.style.width="1024px",c.style.height="768px"):"full_800x1280"==smaatoConfigs[a].dimension?(c.style.width="800px",c.style.height="1280px"):"small"==smaatoConfigs[a].dimension?(c.style.width="120px",c.style.height="20px"):"large"==
smaatoConfigs[a].dimension?(c.style.width="216px",c.style.height="36px"):"medium"==smaatoConfigs[a].dimension&&(c.style.width="168px",c.style.height="68px")};this.maximumModalWidth=function(a){if(smaatoConfigs[a].width)return smaatoConfigs[a].width;if("mma"==smaatoConfigs[a].dimension||"medrect"==smaatoConfigs[a].dimension)return 300;if("xxlarge"==smaatoConfigs[a].dimension)return 320;if("xlarge"==smaatoConfigs[a].dimension)return 300;if("sky"==smaatoConfigs[a].dimension)return 120;if("widesky"==
smaatoConfigs[a].dimension)return 160;if("leader"==smaatoConfigs[a].dimension)return 728;if("full_320x480"==smaatoConfigs[a].dimension)return 320;if("full_480x320"==smaatoConfigs[a].dimension)return 480;if("full_640x960"==smaatoConfigs[a].dimension)return 640;if("full_960x640"==smaatoConfigs[a].dimension)return 960;if("full_1136x640"==smaatoConfigs[a].dimension)return 1136;if("full_768x1024"==smaatoConfigs[a].dimension)return 768;if("full_1024x768"==smaatoConfigs[a].dimension)return 1024;if("full_800x1280"==
smaatoConfigs[a].dimension)return 800;if("small"==smaatoConfigs[a].dimension)return 120;if("large"==smaatoConfigs[a].dimension)return 216;if("medium"==smaatoConfigs[a].dimension)return 168};this.displayImageAd=function(a){var e=g.createElement("a");e.href=a.target;e.rel="external";e.target="_blank";var n=g.createElement("img");n.src=a.link;var f=a.width;d.checkNotNull(f)&&(n.style.width=f);f=a.height;d.checkNotNull(f)&&(n.style.height=f);if(null!=smaatoConfigs[a.divid]&&null!=smaatoConfigs[a.divid].modalDisplay&&
!0===smaatoConfigs[a.divid].modalDisplay)!1!==smaatoConfigs[a.divid].shouldShowModalCallback&&!0!=smaatoConfigs[a.divid].shouldShowModalCallback()||n.addEventListener("load",function(d){t.showModal(a.divid);q="smaato_modal_container";d=g.getElementById(q);d.style["text-align"]="center";e.appendChild(n);d.appendChild(e);c(d,a.beacons)});else{for(f=g.getElementById(a.divid);f.hasChildNodes();)f.removeChild(f.lastChild);f.style["text-align"]="center";e.appendChild(n);f.appendChild(e);c(f,a.beacons)}};
this.displayTextAd=function(b){if(null!=smaatoConfigs[b.divid]&&null!=smaatoConfigs[b.divid].modalDisplay&&!0===smaatoConfigs[b.divid].modalDisplay){if(smaatoConfigs[b.divid].shouldShowModalCallback&&!0==smaatoConfigs[b.divid].shouldShowModalCallback()){var e=g.createElement("div");e.style.padding="0px";g.body.appendChild(e);var d=g.createElement("style");d.type="text/css";d.innerHTML="div.textBanner {\nwhite-space: nowrap;\nmargin: 0px;\npadding: 0px;\nbackground: #f2f5f0; /* Old browsers */\nbackground: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#f2f5f0), color-stop(18%,#e9ece7), color-stop(71%,#bdc1bb), color-stop(94%,#aeb2ab), color-stop(100%,#acb0a9)); /* Chrome,Safari4+ */\nbackground: -webkit-linear-gradient(top, #f2f5f0 0%,#e9ece7 18%,#bdc1bb 71%,#aeb2ab 94%,#acb0a9 100%); /* Chrome10+,Safari5.1+ */\nbackground: linear-gradient(top, #f2f5f0 0%,#e9ece7 18%,#bdc1bb 71%,#aeb2ab 94%,#acb0a9 100%); /* W3C */\n}\ndiv.textBannerHidden {\n opacity:0; position: absolute;\nwhite-space: nowrap;\nmargin: 0px;\npadding: 0px;\n}";
e.appendChild(d);d=g.createElement("div");d.className="textBannerHidden";d.innerHTML=b.text;d.onclick=function(){r.open(b.target,"_blank")};e.appendChild(d);a(d,b.divid,r.innerWidth);t.showModal(b.divid);q="smaato_modal_container";var f=g.getElementById(q);c(f,b.beacons);d.className="smaatoElement";f.appendChild(d);(d=e.parentElement)&&d.removeChild(e)}}else{e=g.getElementById(b.divid);e.innerHTML="";d=g.createElement("style");d.type="text/css";d.innerHTML="div.smaatoContainer {\nwhite-space: nowrap;\nmargin: 0px;\npadding: 0px;\nbackground: #f2f5f0; /* Old browsers */\nbackground: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#f2f5f0), color-stop(18%,#e9ece7), color-stop(71%,#bdc1bb), color-stop(94%,#aeb2ab), color-stop(100%,#acb0a9)); /* Chrome,Safari4+ */\nbackground: -webkit-linear-gradient(top, #f2f5f0 0%,#e9ece7 18%,#bdc1bb 71%,#aeb2ab 94%,#acb0a9 100%); /* Chrome10+,Safari5.1+ */\nbackground: linear-gradient(top, #f2f5f0 0%,#e9ece7 18%,#bdc1bb 71%,#aeb2ab 94%,#acb0a9 100%); /* W3C */\n}\ndiv.textBannerHidden {\n opacity:0; position: absolute;\nwhite-space: nowrap;\nmargin: 0px;\npadding: 0px;\n}";
e.appendChild(d);d=g.createElement("style");d.type="text/css";d.innerHTML="div.smaatoTextBanner {position: relative;top: 50%;-webkit-transform: translateY(-50%);-ms-transform: translateY(-50%);transform: translateY(-50%);text-align: center;white-space: nowrap;\n}";e.appendChild(d);d=g.createElement("div");d.className="textBannerHidden";d.innerHTML=b.text;d.onclick=function(){r.open(b.target,"_blank")};var f=g.createElement("div"),l=I(smaatoConfigs[b.divid].dimension);0===l.width&&(l.width=e.style.width,
l.height=e.style.height);f.style.width=l.width;f.style.height=l.height;f.appendChild(d);f.className="smaatoContainer";e.appendChild(f);a(d,b.divid,parseInt(f.style.width));d.className="smaatoTextBanner";c(f,b.beacons)}};this.displayRichMediaAd=function(a){var e=g.getElementById(a.divid);if(null!=smaatoConfigs[a.divid]&&null!=smaatoConfigs[a.divid].modalDisplay&&!0===smaatoConfigs[a.divid].modalDisplay)smaatoConfigs[a.divid].shouldShowModalCallback&&!0==smaatoConfigs[a.divid].shouldShowModalCallback()?
(t.showModal(a.divid),q="smaato_modal_container",e=g.getElementById(q)):e=null;else if(null!=e)for(;e.hasChildNodes();)e.removeChild(e.lastChild);if(null!==e&&null!==a.mediadata){c(e,a.beacons);if(r.postscribe==p){var d=g.createElement("script");d.src="http://soma.smaato.net/oapi/js/postscribe.js";d.async=!0;d.onload=function(){postscribe("#"+e.id,a.mediadata,f)};g.head.appendChild(d)}else postscribe("#"+e.id,a.mediadata,f);return!0}return!1};this.displayAd=function(a){if("ERROR"==a.status){try{smaatoConfigs[a.divid].lastAd=
!1}catch(c){}try{try{smaatoConfigs[a.divid].callback(a.status)}catch(d){r.somaLastCallback!==p&&r.somaLastCallback(a.status)}if(B)if(postscribe==p){var l=g.createElement("script");l.src="http://soma.smaato.net/oapi/js/postscribe.js";l.async=!0;l.onload=function(){postscribe("#"+a.divid,B,f)};g.head.appendChild(l)}else postscribe("#"+a.divid,B,f)}catch(h){console.error("CallBack function failed "+h)}}else{try{smaatoConfigs[a.divid].lastAd=a,smaatoConfigs[a.divid].callback(a.status)}catch(k){}null!=
a.divid&&null!=a.type&&null!=smaatoConfigs[a.divid]&&null!=smaatoConfigs[a.divid].adType&&(smaatoConfigs[a.divid].adType=a.type);null!=smaatoConfigs[a.divid]&&null!=smaatoConfigs[a.divid].shouldCacheModal&&!0===smaatoConfigs[a.divid].shouldCacheModal?smaatoConfigs[a.divid].lastAd=a:"IMG"==a.type?t.displayImageAd(a):"TXT"==a.type?t.displayTextAd(a):"RICHMEDIA"==a.type&&t.displayRichMediaAd(a)}};this.setGeoLocation=function(a){execTime=Date.now()-execTime;d.createCookieOneHour("geoExecutionTime",execTime,
1);locationScriptLoaded=!0;d.checkNotNull(a.latitude)&&d.checkNotNull(a.longitude)&&(d.createCookieOneHour("smtlatitude",a.latitude),d.createCookieOneHour("smtlongitude",a.longitude));d.checkNotNull(a.countryCode)&&d.createCookieOneHour("smtcoutrycode",a.countryCode);d.checkNotNull(a.countryName)&&d.createCookieOneHour("smtcountryname",a.countryName);d.checkNotNull(a.region)&&d.createCookieOneHour("smtregion",a.region);d.checkNotNull(a.city)&&d.createCookieOneHour("smtcity",a.city);d.checkNotNull(a.postalCode)&&
d.createCookieOneHour("smtpostalcode",a.postalCode);smaatogeo=a}},d=r.SomaJS=new function(){this.cb=[Math.random().toString(16).slice(2,10),Math.random().toString(16).slice(2,6),(0.0625*Math.random()+0.25).toString(16).slice(2,6),(0.25*Math.random()+0.5).toString(16).slice(2,6),Math.random().toString(16).slice(2,14)].join("");this.removeDidPrefix=function(a){return null!=a&&0<=a.indexOf(":")?a.split(":")[1]:a};this.checkNotNull=function(a){return null!=a&&a!=p&&"null"!=a};this.isCorrectFormat=function(a){a=
a.toLowerCase();if(-1<E.indexOf(a))return!0;console.error(a+" is a wrong format, please use "+E);return!1};this.isCorrectDimension=function(a){a=a.toLowerCase();if(-1<F.indexOf(a))return!0;console.error(a+" is a wrong dimension, please use "+F);return!1};this.getValidGender=function(a){if(d.checkNotNull(a)){a=a.toLowerCase();if(-1<G.indexOf(a))return"male"==a||"m"==a?"m":"f";console.error(a+" is a wrong gender, please use "+G)}return""};this.isWindowsDevice=function(){return-1<navigator.userAgent.indexOf("Windows")?
!0:!1};this.isAndroidDevice=function(){return-1<navigator.userAgent.indexOf("Android")?!0:!1};this.isCorrectLatitude=function(a){return-90<=a&&90>=a?!0:!1};this.isCorrectLongitude=function(a){return-180<=a&&180>=a?!0:!1};this.isAppleDevice=function(){return-1<navigator.userAgent.indexOf("Apple")?!0:!1};this.getLocationFromSmt=function(a){if(d.isCookiePresent("smtlatitude")||d.isCookiePresent("lastGeoCall")){var c="",c="",l=d.readCookie("smtlatitude"),f=d.readCookie("smtlongitude");d.checkNotNull(l)&&
d.checkNotNull(f)&&(c=c+("&gps="+l)+(","+f));d.checkNotNull(a.countryCode)||(l=d.readCookie("smtcoutrycode"),d.checkNotNull(l)&&(c+="&countrycode="+l));d.checkNotNull(a.country)||(l=d.readCookie("smtcountryname"),d.checkNotNull(l)&&(c+="&country="+l));l=d.readCookie("smtregion");d.checkNotNull(l)&&(c+="&region="+l);d.checkNotNull(a.city)||(l=d.readCookie("smtcity"),d.checkNotNull(l)&&(c+="&city="+l));d.checkNotNull(a.zip)||(a=d.readCookie("smtpostalcode"),d.checkNotNull(a)&&(c+="&zip="+a));return c}execTime=
Date.now();d.isCookiePresent("geoExecutionTime")?(c=readCookie("geoExecutionTime"),D("http://geo.smaato.net:8080/client_server.location?adspace="+C+"&client="+A+"&gt="+c,!0),eraseCookie("geoExecutionTime"),createCookieOneHour("lastGeoCall",Date.now())):(D("http://geo.smaato.net:8080/client_server.location?adspace="+C+"&client="+A,!0),d.createCookieOneHour("lastGeoCall",Date.now()));return""};this.readCookie=function(a){try{a+="=";for(var c=g.cookie.split(";"),d=0;d<c.length;d++){for(var f=c[d];" "==
f.charAt(0);)f=f.substring(1,f.length);if(0==f.indexOf(a))return f.substring(a.length,f.length)}}catch(b){}return null};this.isCookiePresent=function(a){a=d.readCookie(a);return null!=a&&a!=p&&""!=a?!0:!1};this.createCookieOneHour=function(a,c){try{if(c&&null!=c&&c!=p){var d=new Date,f=d.getTime();d.setTime(f+72E5);g.cookie=a+"="+c+"; expires="+d.toUTCString()+"; path=/"}}catch(b){}};this.presentModal=function(a){if(!0==smaatoConfigs[a].modalDisplay&&!0==smaatoConfigs[a].shouldCacheModal&&!1!=smaatoConfigs[a].lastAd&&
!0==d.checkNotNull(smaatoConfigs[a].lastAd)){var c=smaatoConfigs[a].lastAd;"IMG"==c.type?t.displayImageAd(c):"TXT"==c.type?t.displayTextAd(c):"RICHMEDIA"==c.type&&t.displayRichMediaAd(c);smaatoConfigs[a].lastAd=!1}else console.log("SOMA> Modal presentation not possible")};this.loadAd=function(a,c){function l(){var a=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()}function f(a,b,c){try{if(c){var d=new Date;d.setTime(d.getTime()+
864E5*c);var e="; expires="+d.toGMTString()}else e="";g.cookie=a+"="+b+e+"; path=/"}catch(f){}}r.somaLastCallback===p&&(r.somaLastCallback=c);y=c;q=a.adDivId;var b="http://soma.smaato.net/oapi/reqAd.jsp?";smaatoConfigs[q]={};smaatoConfigs[q].callback=c;smaatoConfigs[q].shouldShowModalCallback=!1;smaatoConfigs[q].modalClosedCallback=!1;smaatoConfigs[q].shouldCacheModal=!1;var e=a.dimension;d.checkNotNull(e)&&d.isCorrectDimension(e)?smaatoConfigs[q].dimension=e:smaatoConfigs[q].dimension="mma";smaatoConfigs[q].modalDisplay=
!0===a.modalDisplay;!0===smaatoConfigs[q].modalDisplay&&(a.shouldShowModal&&(smaatoConfigs[q].shouldShowModalCallback=a.shouldShowModal),a.modalClosedCallback&&(smaatoConfigs[q].modalClosedCallback=a.modalClosedCallback),!0===a.shouldCacheModal&&(smaatoConfigs[q].shouldCacheModal=!0));var n=a.publisherId,b=d.checkNotNull(n)?b+("pub="+n):b+"pub=0";d.checkNotNull(a.adDivId)&&(b+="&divid="+a.adDivId,somaLastDivId=a.adDivId);n=a.adSpaceId;d.checkNotNull(n)?(b+="&adspace="+n,C=n):b+="&adspace=0";n=a.format;
b=d.checkNotNull(n)&&d.isCorrectFormat(n)?b+("&format="+n):b+"&format=all";"vast"==n&&(b+="&vastver=2");var e=a.formatstrict,b=d.checkNotNull(e)?b+("&formatstrict="+e):b+"&formatstrict=false",s=e=0;d.checkNotNull(a.width)&&(e=parseInt(a.width),d.checkNotNull(a.height)&&(s=parseInt(a.height)));try{if(d.checkNotNull(a.ref))b+="&ref="+a.ref;else{var h=r.location.href;r.parent!==r&&(h=g.referrer);"undefined"!=typeof h&&null!=h&&0<h.length&&0===h.indexOf("http")&&(b+="&ref="+encodeURIComponent(h))}}catch(t){}d.checkNotNull(a.bundle)&&
(b+="&bundle="+a.bundle);b=d.checkNotNull(a.passback)?b+"&pb=1":b+"&pb=0";d.checkNotNull(a.websiteurl)&&(b+="&websiteurl="+a.websiteurl);d.checkNotNull(a.iabcategory)&&(b+="&iabcategory="+a.iabcategory);d.checkNotNull(a.adspacename)&&(b+="&adspacename="+a.adspacename);0<e&&0<s?(b=b+("&width="+e)+("&height="+s),smaatoConfigs[q].width=e,smaatoConfigs[q].height=s):(e=a.dimension,d.checkNotNull(e)&&d.isCorrectDimension(e)?(b+="&dimension="+e,smaatoConfigs[q].dimension=e):(b+="&dimension=mma",smaatoConfigs[q].dimension=
"mma"));h=a.dimensionstrict;b=d.checkNotNull(h)?b+("&dimensionstrict="+h):!0===a.modalDisplay?b+"&dimensionstrict=true":b+"&dimensionstrict=false";h=a.age;d.checkNotNull(h)&&(b+="&age="+h);h=a.city;d.checkNotNull(h)&&(b+="&city="+h);h=a.zip;d.checkNotNull(h)&&(b+="&zip="+h);h=a.country;d.checkNotNull(h)&&(b+="&country="+h);h=a.countryCode;d.checkNotNull(h)&&(b+="&countryCode="+h);h=d.getValidGender(a.gender);0<h.length&&(b+="&gender="+h);h=a.qs;d.checkNotNull(h)&&(b+="&qs="+h);h="";d.checkNotNull(a.keywordSearch)&&
(h+=a.keywordSearch);d.checkNotNull(a.keywords)&&(h+=","+a.keywords);""!=h&&(b+="&kws="+h);h=a.latitude;e=a.longitude;s=a.useLocation;d.checkNotNull(h)&&d.checkNotNull(e)?d.isCorrectLatitude(h)&&d.isCorrectLongitude(e)?(b+="&gps="+h+","+e,b+="&geotype=3"):console.error("Incorrect GPS values"):s&&(d.checkNotNull(d.lastHTML5Location)&&(b+="&gps="+d.lastHTML5Location.latitude+","+d.lastHTML5Location.longitude,b+="&geotype=1"),navigator.geolocation.getCurrentPosition(function(a){d.lastHTML5Location=a.coords}));
w||(w=d.readCookie("SomaSession"));w||(w=l(),f("SomaSession",w,0));b+="&session="+w;x||(x=d.readCookie("SomaUser"));x||(x=l(),f("SomaUser",x,365));b+="&atuid="+x;d.checkNotNull(a.did)&&(a.did=d.removeDidPrefix(a.did),d.isAndroidDevice()?40==a.did.length?(a.udid=a.did,a.iosadtracking=a.diddnt):16==a.did.length?(a.androidid=a.did,a.googlednt=a.diddnt):36==a.did.length&&(a.googleadid=a.did,a.googlednt=a.diddnt):d.isAppleDevice()?(a.iosadid=a.did,a.iosadtracking=a.diddnt):d.isWindowsDevice()&&(a.wpid=
a.did));a.macmd5&&(b+="&macmd5="+a.macmd5);a.odin&&(b+="&odin="+a.odin);a.openudid&&(b+="&openudid="+a.openudid);a.iosadid&&(b+="&iosadid="+a.iosadid);a.iosadtracking?b+="&iosadtracking=true":"undefined"!=typeof a.iosadtracking&&(b+="&iosadtracking=false");a.wpid&&(b+="&wpid="+a.wpid);a.imei&&(b+="&imei="+a.imei);a.googleadid&&(b+="&googleadid="+a.googleadid);a.googlednt?b+="&googlednt=true":"undefined"!=typeof a.googlednt&&(b+="&googlednt=false");a.androidid&&(b+="&androidid="+a.androidid);a.coppa&&
(b+="&coppa="+a.coppa);b=a.cb?b+("&cb="+a.cb):b+("&cb="+this.cb);d.checkNotNull(a.autoReload)?(h=a.autoReload,10>h?(console.warn("Minimal auto reload time is 10 seconds. Automatically setting timer to 10 seconds"),h=10):240<h&&(console.warn("Maximal auto reload time is 240 seconds. Automatically setting timer to 240 seconds"),h=240),setTimeout(function(){d.loadAd(a,c)},1E3*h)):d.checkNotNull(a.autoRefresh)?(h=a.autoRefresh,10>h?(console.warn("Minimal auto reload time is 10 seconds. Automatically setting timer to 10 seconds"),
h=10):240<h&&(console.warn("Maximal auto reload time is 240 seconds. Automatically setting timer to 240 seconds"),h=240),setTimeout(function(){d.loadAd(a,c)},1E3*h)):d.checkNotNull(a.autorefresh)?(h=a.autorefresh,10>h?(console.warn("Minimal auto reload time is 10 seconds. Automatically setting timer to 10 seconds"),h=10):240<h&&(console.warn("Maximal auto reload time is 240 seconds. Automatically setting timer to 240 seconds"),h=240),setTimeout(function(){d.loadAd(a,c)},1E3*h)):d.checkNotNull(a.autoreload)&&
(h=a.autoreload,10>h?(console.warn("Minimal auto reload time is 10 seconds. Automatically setting timer to 10 seconds"),h=10):240<h&&(console.warn("Maximal auto reload time is 240 seconds. Automatically setting timer to 240 seconds"),h=240),setTimeout(function(){d.loadAd(a,c)},1E3*h));B=a.passback;b+="&apiver=500";if("vast"==n)if(g.evaluate==p)y(!1);else{var b=b+("&response=XML&client="+A),b=b+"&connection=wifi",u=new k(b);u.adDivId=a.adDivId;u.loadCallback=function(b){b?(m.dump(y),y(!0),!0===a.inlineVideo?
(u.isInLine=!0,u.showInline(a.adDivId)):(u.isInLine=!1,u.show())):(m.log("Ad Load: FAILED"),y(!1))};u.load()}else{b+="&response=JSONP&client="+A;n=g.createElement("script");n.src=b;null==g.body&&(g.body=g.createElement("body"));if(null==q||null==g.getElementById(q))null!=q?(b=g.createElement("div"),b.id=q):(b=g.createElement("div"),b.id="smaato_dynamic"),g.getElementsByTagName("body")[0].appendChild(b),q=b.id;g.getElementById(q).appendChild(n)}}};k.prototype.isIEParser=!1;k.prototype.xpathImpression=
"/VAST//Impression";k.prototype.xpathMediaFiles="/VAST//Linear//MediaFile";k.prototype.xpathDuration="/VAST//Linear//Duration";k.prototype.xpathTrackingEventURL="/VAST//Linear//TrackingEvents/Tracking";k.prototype.xpathTrackingEventsTime="/VAST//Linear//TrackingEvents/Tracking/@event";k.prototype.xpathVideoClickThroughURL="/VAST//Linear//VideoClicks/ClickThrough";k.prototype.xpathVideoClickTracking="/VAST//Linear//VideoClicks/ClickTracking";k.prototype.xpathWrapper="/VAST//Wrapper/VASTAdTagURI";k.prototype.xpathCompanionAd=
"/VAST//InLine//CompanionAds/Companion";k.prototype.xpathBeacon="//beacon";k.prototype.mediaFiles=[];k.prototype.duration=null;k.prototype.trackingEvents={};k.prototype.videoClickThroughURLList=[];k.prototype.videoClickTrackingURLList=[];k.prototype.beacons=[];k.prototype.videoPlayer=function(){return g.getElementById("_smaato_vast_video_Player")};k.prototype.closeButton=function(){return g.getElementById("_smaato_vast_close")};k.prototype.isVisible=!1;k.prototype.isAdAvailable=!1;k.prototype.isSkippable=
!1;k.prototype.companionAds=[];k.prototype.reset=function(){this.mediaFiles=[];this.duration=null;this.trackingEvents={};this.videoClickThroughURLList=[];this.videoClickTrackingURLList=[];this.beacons=[];this.isSkippable=this.isAdAvailable=this.isVisible=!1;this.skipButtonTimer=p};k.prototype.initialize=function(){m.log("<<<<<<<< INITIALIZE >>>>> ");this.reset();var a=g.getElementById("__SMAATO_CSS_VAST__");m.dump(a);a==p&&(m.log("Adding CSS"),a=g.createElement("style"),a.type="text/css",a.id="__SMAATO_CSS_VAST__",
a.innerHTML=this.popupCSS,g.getElementsByTagName("head")[0].appendChild(a));g.getElementById("__smaato_vast_div__")==p&&(a=g.createElement("div"),a.id="__smaato_vast_div__",a.className="_smaato_modal",a.innerHTML=this.popupHTML,g.body.appendChild(a),a=this.closeButton(),self=this,a.addEventListener("click",function(){self.isSkippable&&self.hide()}))};k.prototype.showInline=function(){var a=g.getElementById(this.adDivId);if(a!=p){this.isVisible=!0;a.innerHTML="";var c=g.createElement("div");c.style.width=
"100%";c.style.height="100%";c.style.position="relative";a.appendChild(c);var d=this,f=this.trackingEvents.impression;if(f!=p)for(var b=0;b<f.length;b++)d.callTrackingURL(f[b]);f=this.trackingEvents.creativeView;if(f!=p)for(b=0;b<f.length;b++)d.callTrackingURL(f[b]);var e=g.createElement("video");e.style.height="100%";e.style.width="100%";e.autoplay=!0;e.controls=!0;e.style.backgroundColor="#000000";c.appendChild(e);e.innerHTML="Your browser does not support HTML5 video.";this.mediaFiles.forEach(function(a){var b=
g.createElement("source");b.src=a.url;b.type=a.type;e.appendChild(b);d.isVisible=!0});e.load();e.play();e.addEventListener("click",function(){!1==d.isVisible?m.log("VIDEO IS NOT VISIBLE"):(d.hide(!0),0<d.videoClickThroughURLList.length&&(m.dump(d.videoClickThroughURLList),m.dump(d.videoClickThroughURLList[0]),r.open(d.videoClickThroughURLList[0]),d.videoClickTrackingURLList.forEach(function(a){d.callTrackingURL(a)})))});e.onended=function(a){d.fireTrackingEvent("complete");d.hide()};e.ontimeupdate=
function(a){a=Math.floor(e.currentTime/e.duration*100/25);var b=["start","firstQuartile","midpoint","thirdQuartile"][a];m.log("Current time: ("+a+") "+b);d.fireTrackingEvent(b)};c=g.createElement("div");c.style.bottom="0px";c.style.position="absolute";c.style.width=a.style.width;c.style.height=a.style.height}};k.prototype.show=function(){if(!1!=this.isAdAvailable){this.firefoxVideoPlayerCurrentTimeFlag=!1;var a=g.getElementById("__smaato_vast_modal__");if(a!=p){var c=this;a.className="_smaato_modal__overlay_visible";
var d=this.trackingEvents.impression;if(d!=p)for(a=0;a<d.length;a++)c.callTrackingURL(d[a]);d=this.trackingEvents.creativeView;if(d!=p)for(a=0;a<d.length;a++)c.callTrackingURL(d[a]);var f=this.videoPlayer();f.innerHTML="Your browser does not support HTML5 video.";this.mediaFiles.forEach(function(a){var b=g.createElement("source");b.src=a.url;b.type=a.type;a=a.width;var d=r.innerWidth||g.documentElement.clientWidth||g.body.clientWidth;d<a&&(a=d-30);f.width=a;f.appendChild(b);c.isVisible=!0});f.load();
f.play();f.addEventListener("click",function(){!1==c.isVisible?m.log("VIDEO IS NOT VISIBLE"):(c.hide(!0),0<c.videoClickThroughURLList.length&&(m.dump(c.videoClickThroughURLList),m.dump(c.videoClickThroughURLList[0]),r.open(c.videoClickThroughURLList[0]),c.videoClickTrackingURLList.forEach(function(a){c.callTrackingURL(a)})))});f.onended=function(a){c.fireTrackingEvent("complete");c.hide()};f.ontimeupdate=function(a){a=Math.floor(f.currentTime/f.duration*100/25);var b=["start","firstQuartile","midpoint",
"thirdQuartile"][a];m.log("Current time: ("+a+") "+b);c.fireTrackingEvent(b)};var b=g.getElementById("_smaato_vast_close");b.style.display="none";b.addEventListener("click",function(){c.isSkippable&&c.hide()});f.onplaying=function(){if(c.skipButtonTimer==p)if(30>f.duration)m.log("shorter than 30s so non skipable"),this.isSkippable=!1;else{m.log("Configuring skip timer...");b.style.display="inline";var a=0;this.isSkippable=!1;var d=function(){m.log("Tick:"+a);b.textContent=15-a;a++;16>a?c.skipButtonTimer=
setTimeout(d,1E3):(b.textContent="X",c.isSkippable=!0)};d()}};a=g.getElementById("_smaato_vast_companion_ad_");this.createCompanionElement(a);this.willShowCallback&&this.willShowCallback()}}};k.prototype.createCompanionElement=function(a){a.innerHTML="";var c;if(0==this.companionAds.length)a.style.height="0px",a.style.width="0px",a.innerHTML="";else{var l=this.companionAds[0];if("staticresource"==l.resourceType.toLowerCase()){var f=g.createElement("img");f.src=l.resourceValue;f.style.height=l.height+
"px";f.style.width=l.width+"px";c=f;var b=this;f.onclick=function(){!1==b.isVisible?k.log("COMPANION AD CLICK: VIDEO IS NOT VISIBLE"):(r.open(l.clickThrough),b.hide())};a.appendChild(f)}else"htmlresource"==l.resourceType.toLowerCase()?(f=g.createElement("div"),f.innerHTML=l.resourceValue,f.style.height=l.height+"px",f.style.width=l.width+"px",c=f,b=this,f.onclick=function(){!1==b.isVisible?k.log("COMPANION AD CLICK: VIDEO IS NOT VISIBLE"):(b.callTrackingURL(l.clickThrough),b.hide())},a.appendChild(f)):
"iframeresource"==l.resourceType.toLowerCase()&&(f=g.createElement("IFRAME"),f.frameBorder=0,f.setAttribute("src",l.resourceValue),f.style.height=l.height+"px",f.style.width=l.width+"px",c=f,b=this,f.onclick=function(){!1==b.isVisible?k.log("COMPANION AD CLICK: VIDEO IS NOT VISIBLE"):(b.callTrackingURL(l.clickThrough),b.hide())},a.appendChild(f));var f=a.style.width,e=a.style.height;if(d.checkNotNull(f))parseInt(c.style.width)>parseInt(f)&&(c.style.width=f),parseInt(c.style.height)>parseInt(e)&&(c.style.height=
e+"px");else{console.log("companionAdDiv");a.style.height=l.height+"px";a.style.width=l.width+"px";console.log(">>companionAdDiv");var k=0/0}}};k.prototype.hide=function(a){clearTimeout(this.skipButtonTimer);if(!0!=this.isInLine){this.isAdAvailable=this.isVisible=!1;var c=g.getElementById("__smaato_vast_modal__");if(c!=p){c.className="_smaato_modal__overlay";c=this.videoPlayer();c.pause();c.innerHTML="Your browser does not support HTML5 video.";this.fireTrackingEvent("close");var d=!0===a,f=this;
setTimeout(function(){f.didHideCallback&&f.didHideCallback(d)},300)}}};k.prototype.fireTrackingEvent=function(a){var c=this.trackingEvents[a],d=this;c!=p&&0<c.length&&(m.log("TRACK EVENT:"+a),c.forEach(function(a){d.callTrackingURL(a)}));this.trackingEvents[a]=[]};k.prototype.parseFinished=function(){m.log("");m.log("");m.log(">>> PARSE FINISHED <<<");m.log("");m.log("");m.log("MediaFile:"+this.mediaFile);m.log("Duration:"+this.duration);m.log(">> TrackingEvents:");m.dump(this.trackingEvents);m.log("<< TrackingEvents");
m.log("");m.log("Video Clickthrough:"+this.videoClickThroughURLList);m.log(">> Beacons:");m.dump(this.beacons);m.log("<< Beacons");m.log("");m.log("");m.log(">> Companion Ads:");m.dump(this.companionAds);m.log("<< Companion Ads");m.log("");m.log("");m.log("<<< ---- >>>");m.log("");m.log("");0<this.mediaFiles.length&&(this.isAdAvailable=!0);this.loadCallback&&this.loadCallback(this.isAdAvailable)};k.prototype.load=function(a){a==p&&(a=this.url,this.initialize());m.log("loading: "+a);var c=new XMLHttpRequest;
if(c){m.log("XMLHttpRequest created");var d=this;c.onreadystatechange=function(){4==c.readyState&&(200==c.status?d.parse(c.responseXML):(m.err("url loading failed! GET:"+c.status+" "+a),d.loadCallback(!1)))};c.open("GET",a,!0);c.send()}else m.err("XMLHttpRequest couldn't be created!")};k.prototype.callTrackingURL=function(a){a==p||null==a||3>a.length||(m.log("Track URL: "+a),(new Image).src=a)};k.prototype.parse=function(a){try{this.parseMediaFiles(a),this.parseDuration(a),this.parseTrackingEvents(a),
this.parseImpressions(a),this.parseVideoClickThroughURL(a),this.parseBeacons(a),this.parseVideoClickTrackingURL(a),this.parseCompanionAds(a),this.parseWrapper(a)}catch(c){m.dump(c),this.loadCallback(!1)}};k.prototype.parseImpressions=function(a){a=this.runXpath(a,this.xpathImpression);this.trackingEvents.impression==p&&(this.trackingEvents.impression=[]);for(var c=0;c<a.length;c++)this.trackingEvents.impression.push(a[c]);m.dump(this.trackingEvents)};k.prototype.parseCompanionAds=function(a){var c=
this.xpathCompanionAd;m.log("Running XPATH:"+c);var d=[];a=a.evaluate(c,a,null,XPathResult.ANY_TYPE,null);for(var f=a.iterateNext();f;){var c={resourceType:"unknown",creativeType:"unknown"},b=f.attributes;if(b==p||null==b)b=[];for(var e=0;e<b.length;e++)c[b.item(e).nodeName]=b.item(e).nodeValue;f=f.children;if(f==p||null==f)f=[];for(e=0;e<f.length;e++){b=f[e];if("staticresource"==b.nodeName.toLowerCase()||"htmlresource"==b.nodeName.toLowerCase()||"iframeresource"==b.nodeName.toLowerCase())c.resourceType=
b.nodeName.toLowerCase(),c.resourceValue=b.textContent.trim(),0<b.attributes.length&&(c.creativeType=b.attributes.item(0).nodeValue);"companionclickthrough"==b.nodeName.toLowerCase()&&(c.clickThrough=b.textContent.trim());if("trackingevents"==b.nodeName.toLowerCase()){b=b.children;if(b==p||null==b)b=[];for(var g=[],e=0;e<b.length;e++)g.push(b[e].textContent.trim());c.events=g}}"htmlresource"!=c.resourceType.toLowerCase()&&"iframeresource"!=c.resourceType.toLowerCase()&&0!=c.creativeType.indexOf("image/")||
d.push(c);f=a.iterateNext()}this.companionAds=d};k.prototype.parseWrapper=function(a){a=this.runXpath(a,this.xpathWrapper);0<a.length?(a=a.pop(),this.load(a)):this.parseFinished()};k.prototype.parseDuration=function(a){this.duration=this.runXpath(a,this.xpathDuration).pop()};k.prototype.parseBeacons=function(a){a=this.runXpath(a,this.xpathBeacon);this.beacons=this.beacons.concat(a)};k.prototype.parseVideoClickThroughURL=function(a){a=this.runXpath(a,this.xpathVideoClickThroughURL).pop();m.log("URL = ");
m.dump(a);a!=p&&this.videoClickThroughURLList.push(a)};k.prototype.parseVideoClickTrackingURL=function(a){a=this.runXpath(a,this.xpathVideoClickTracking);for(var c=0;c<a.length;c++)this.videoClickTrackingURLList.push(a[c])};k.prototype.parseTrackingEvents=function(a){var c=this.runXpath(a,this.xpathTrackingEventsTime),d=this.trackingEvents;c.forEach(function(a){d[a]==p&&(d[a]=[])});a=this.runXpath(a,this.xpathTrackingEventURL);for(var f=0;f<a.length;f++)this.trackingEvents[c[f]].push(a[f]);m.dump(this.trackingEvents)};
k.prototype.parseMediaFiles=function(a){a=this.getXpathNodes(a,this.xpathMediaFiles);m.dump(a);this.mediaFiles=a};k.prototype.getXMLDoc=function(a){var c=null;r.DOMParser?c=(new DOMParser).parseFromString(a,"text/xml"):(this.isIEParser=!0,c=new ActiveXObject("Microsoft.XMLDOM"),c.async=!1,c.loadXML(a));return null==c||c==p?(m.err("Failed to read xml response"),null):c};k.prototype.getXpathNodes=function(a,c){m.log("Running XPATH:"+c);for(var d=[],f=a.evaluate(c,a,null,XPathResult.ANY_TYPE,null),b=
f.iterateNext();b;){var e={};e.url=b.textContent.trim();b=b.attributes;if(b==p||null==b)b=[];for(var g=0;g<b.length;g++)e[b.item(g).nodeName]=b.item(g).nodeValue;d.push(e);b=f.iterateNext()}return d};k.prototype.runXpath=function(a,c){m.log("Running XPATH:"+c);for(var d=[],f=a.evaluate(c,a,null,XPathResult.ANY_TYPE,null),b=f.iterateNext();b;)d.push(b.textContent.trim()),b=f.iterateNext();return d};k.prototype.popupHTML='        <div class="_smaato_modal__overlay" id ="__smaato_vast_modal__">         <label id = "_smaato_vast_close" class=\'smaato_close\'>X</label>             <div class="_smaato_modal__box">                 <video width="400" id = "_smaato_vast_video_Player" autoplay preload=true controls>                         Your browser does not support HTML5 video.                 </video>            </div>             <div id="_smaato_vast_companion_ad_" style="bottom: 0px;left:50%;transform:translate(-50%,0);position:absolute;"></div>         </div>         ';
k.prototype.popupCSS="._smaato_modal { display: block; padding: 0 1em; text-align: center; width: 100%; }  @media (min-width: 43.75em) {  ._smaato_modal {         padding: 1em 2em;         text-align: right;     } }  ._smaato_modal > #_smaato_vast_close {     background: #606061;     color: #FFFFFF;     line-height: 25px;     position: absolute;     right: 0px;     text-align: center;     top: 0px;     width: 24px;     text-decoration: none;     font-weight: bold;     -webkit-border-radius: 12px;     -moz-border-radius: 12px;     border-radius: 12px;     -moz-box-shadow: 1px 1px 3px #000;     -webkit-box-shadow: 1px 1px 3px #000;    box-shadow: 1px 1px 3px #000;     cursor: hand;     z-index:1000;}._smaato_modal > #_smaato_vast_close:hover {     -webkit-transform: scale(0.97);     -ms-transform: scale(0.97);     transform: scale(0.97); }  ._smaato_modal input {     position: absolute;     right: 100px;     top: 30px;     z-index: -10; }  ._smaato_modal__overlay {     background: black;     bottom: 0;     left: 0;     position: fixed;     right: 0;     text-align: center;     top: 0;     z-index: -800; }  ._smaato_modal__box {     padding: 1em .75em;     position: relative;     margin: 1em auto;     width: 90%; }  @media (min-height: 37.5em) {  ._smaato_modal__box {         left: 50%;         position: absolute;         top: 50%;         -webkit-transform: translate(-50%, -50%);         -ms-transform: translate(-50%, -50%);         transform: translate(-50%, -50%);     } }  @media (min-width: 50em) {  ._smaato_modal__box { padding: 1.75em; } }  ._smaato_modal__box #_smaato_vast_close {     background: #606061;     color: #FFFFFF;     line-height: 25px;     position: absolute;     right: 0px;     text-align: center;     top: 0px;     width: 24px;     text-decoration: none;     font-weight: bold;     -webkit-border-radius: 12px;     -moz-border-radius: 12px;     border-radius: 12px;     -moz-box-shadow: 1px 1px 3px #000;     -webkit-box-shadow: 1px 1px 3px #000;    box-shadow: 1px 1px 3px #000;     cursor: hand;     z-index:1000;}  ._smaato_modal__box h2 {     color: #FFDE16;     margin-bottom: 1em;     text-transform: uppercase; }  .modal__box p {     color: #FFDE16;     text-align: left; }  ._smaato_modal__overlay {     opacity: 0;     overflow: hidden;     -webkit-transform: scale(0.5);     -ms-transform: scale(0.5);     transform: scale(0.5);     -webkit-transition: all 0.75s cubic-bezier(0.19, 1, 0.22, 1);     transition: all 0.75s cubic-bezier(0.19, 1, 0.22, 1); }  ._smaato_modal__overlay_visible {     background: black;     bottom: 0;     left: 0;     position: fixed;     right: 0;     text-align: center;     top: 0;     z-index: -800;     opacity: 1;     -webkit-transform: scale(1);     -ms-transform: scale(1);     transform: scale(1);     -webkit-transition: all 0.75s cubic-bezier(0.19, 1, 0.22, 1);     transition: all 0.75s cubic-bezier(0.19, 1, 0.22, 1);     z-index: 800; } ._smaato_modal__overlay_visible #_smaato_vast_close {     background: #606061;     color: #FFFFFF;     line-height: 25px;     position: absolute;     right: 0px;     text-align: center;     top: 0px;     width: 24px;     text-decoration: none;     font-weight: bold;     -webkit-border-radius: 12px;     -moz-border-radius: 12px;     border-radius: 12px;     -moz-box-shadow: 1px 1px 3px #000;     -webkit-box-shadow: 1px 1px 3px #000;    box-shadow: 1px 1px 3px #000;     cursor: hand;     z-index:1000;}  #_smaato_vast_close:hover {     -webkit-transform: scale(0.97);     -ms-transform: scale(0.97);     transform: scale(0.97); }";
var m={prefix:"VAST",enabled:!0,err:function(a){this._(this.prefix+": ERROR> ",a)},log:function(a){this._(this.prefix+": INFO> ",a)},dump:function(a){this.enabled&&console.log(a)},_:function(a,c){this.enabled&&console.log(a+": "+c)},enabled:!1}})(window,document);
